<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="/favicon.png">
  <title>Ralph CLI - From One to Many</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #ffffff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      overflow: hidden;
      position: relative;
    }

    /* Grid container */
    .logo-grid {
      display: grid;
      grid-template-columns: repeat(var(--cols), 1fr);
      gap: 2px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      perspective: 1000px;
      transform-style: preserve-3d;
    }

    /* Individual tile */
    .tile {
      width: 100%;
      aspect-ratio: 1;
      background: #fff;
      border: 1px solid #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: center;
      transform-style: preserve-3d;
      transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
    }

    .tile img {
      width: 80%;
      height: 80%;
      object-fit: contain;
      filter: grayscale(100%);
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .tile.elevated {
      transform: translateZ(30px) scale(1.02);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      z-index: 10;
    }

    .tile.elevated img {
      opacity: 1;
    }

    .tile.slight-elevated {
      transform: translateZ(15px) scale(1.01);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .tile.slight-elevated img {
      opacity: 0.85;
    }

    /* Content overlay */
    .content-overlay {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 100;
      pointer-events: none;
    }

    .tagline {
      font-size: clamp(1.5rem, 4vw, 3rem);
      font-weight: 300;
      color: #1a1a1a;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      background: rgba(255, 255, 255, 0.95);
      padding: 1.5rem 3rem;
      border: 2px solid #1a1a1a;
      text-shadow: none;
      margin-bottom: 1rem;
    }

    .tagline strong {
      font-weight: 700;
    }

    .enter-btn {
      pointer-events: auto;
      display: inline-block;
      padding: 0.75rem 2rem;
      font-size: 0.875rem;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #fff;
      background: #1a1a1a;
      border: 2px solid #1a1a1a;
      text-decoration: none;
      transition: all 0.2s ease;
      margin-top: 1rem;
    }

    .enter-btn:hover {
      background: #fff;
      color: #1a1a1a;
    }

    /* Traversing color Ralph */
    .traverser {
      position: fixed;
      z-index: 50;
      pointer-events: none;
      will-change: transform;
    }

    .traverser img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.3));
    }

    .traverser.bounce {
      animation: bounce 0.5s ease-in-out infinite alternate;
    }

    @keyframes bounce {
      from { transform: translateY(0); }
      to { transform: translateY(-10px); }
    }

    /* Responsive grid columns */
    @media (min-width: 1400px) {
      :root { --cols: 12; }
    }
    @media (min-width: 1000px) and (max-width: 1399px) {
      :root { --cols: 10; }
    }
    @media (min-width: 700px) and (max-width: 999px) {
      :root { --cols: 8; }
    }
    @media (max-width: 699px) {
      :root { --cols: 6; }
    }
  </style>
</head>
<body>
  <div class="logo-grid" id="grid"></div>
  <div id="traversers"></div>

  <div class="content-overlay">
    <div class="tagline"><strong>Ralph</strong> &mdash; From One to Many</div>
    <a href="/dashboard.html" class="enter-btn">Enter Dashboard</a>
  </div>

  <script>
    const grid = document.getElementById('grid');
    const logoSrc = '/ralph-logo-bw.png';

    // Calculate grid size based on viewport
    function getGridSize() {
      const width = window.innerWidth;
      let cols;
      if (width >= 1400) cols = 12;
      else if (width >= 1000) cols = 10;
      else if (width >= 700) cols = 8;
      else cols = 6;

      const tileSize = width / cols;
      const rows = Math.ceil(window.innerHeight / tileSize) + 1;
      return { cols, rows, total: cols * rows };
    }

    // Create tiles
    function createGrid() {
      const { cols, rows, total } = getGridSize();
      grid.innerHTML = '';
      grid.style.setProperty('--cols', cols);

      for (let i = 0; i < total; i++) {
        const tile = document.createElement('div');
        tile.className = 'tile';
        tile.dataset.index = i;
        tile.dataset.col = i % cols;
        tile.dataset.row = Math.floor(i / cols);

        const img = document.createElement('img');
        img.src = logoSrc;
        img.alt = 'Ralph';
        img.draggable = false;

        tile.appendChild(img);
        grid.appendChild(tile);
      }
    }

    // Wave animation
    let animationId;
    let time = 0;

    function animateWave() {
      const tiles = document.querySelectorAll('.tile');
      const { cols } = getGridSize();
      const centerX = cols / 2;
      const centerY = (tiles.length / cols) / 2;

      tiles.forEach(tile => {
        const col = parseInt(tile.dataset.col);
        const row = parseInt(tile.dataset.row);

        // Create wave pattern emanating from center
        const dx = col - centerX;
        const dy = row - centerY;
        const distance = Math.sqrt(dx * dx + dy * dy);

        // Multiple wave sources for more dynamic effect
        const wave1 = Math.sin(distance * 0.8 - time * 2) * 0.5 + 0.5;
        const wave2 = Math.sin(distance * 0.5 + time * 1.5 + Math.PI) * 0.3 + 0.5;
        const combined = (wave1 + wave2) / 2;

        tile.classList.remove('elevated', 'slight-elevated');

        if (combined > 0.75) {
          tile.classList.add('elevated');
        } else if (combined > 0.55) {
          tile.classList.add('slight-elevated');
        }
      });

      time += 0.03;
      animationId = requestAnimationFrame(animateWave);
    }

    // Initialize
    createGrid();
    animateWave();

    // Handle resize
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        cancelAnimationFrame(animationId);
        createGrid();
        animateWave();
      }, 200);
    });

    // Traversing Color Ralph
    const traversersContainer = document.getElementById('traversers');
    const colorLogoSrc = '/ralph-logo.png';
    const activeTraversers = [];
    const maxTraversers = 3;

    function createTraverser() {
      if (activeTraversers.length >= maxTraversers) return;

      const { cols } = getGridSize();
      const tileSize = window.innerWidth / cols;
      const size = tileSize * (0.8 + Math.random() * 0.4); // Random size variation

      const traverser = document.createElement('div');
      traverser.className = 'traverser bounce';
      traverser.style.width = size + 'px';
      traverser.style.height = size + 'px';

      // Random vertical position (avoid center where tagline is)
      const centerY = window.innerHeight / 2;
      const avoidZone = 150;
      let yPos;
      if (Math.random() > 0.5) {
        yPos = Math.random() * (centerY - avoidZone - size);
      } else {
        yPos = centerY + avoidZone + Math.random() * (window.innerHeight - centerY - avoidZone - size);
      }
      traverser.style.top = yPos + 'px';

      // Start from left or right
      const fromLeft = Math.random() > 0.5;
      const startX = fromLeft ? -size : window.innerWidth;
      const endX = fromLeft ? window.innerWidth : -size;
      traverser.style.left = startX + 'px';

      const img = document.createElement('img');
      img.src = colorLogoSrc;
      img.alt = 'Color Ralph';
      img.draggable = false;
      traverser.appendChild(img);

      traversersContainer.appendChild(traverser);
      activeTraversers.push(traverser);

      // Animate across screen
      const duration = 8000 + Math.random() * 6000; // 8-14 seconds
      const startTime = performance.now();

      function moveTraverser(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = elapsed / duration;

        if (progress >= 1) {
          traverser.remove();
          const idx = activeTraversers.indexOf(traverser);
          if (idx > -1) activeTraversers.splice(idx, 1);
          return;
        }

        // Easing for smooth movement
        const x = startX + (endX - startX) * progress;

        // Add subtle wave motion synced with grid
        const waveOffset = Math.sin(progress * Math.PI * 4 + time) * 20;

        traverser.style.left = x + 'px';
        traverser.style.top = (yPos + waveOffset) + 'px';

        requestAnimationFrame(moveTraverser);
      }

      requestAnimationFrame(moveTraverser);
    }

    // Spawn traversers at random intervals
    function scheduleNextTraverser() {
      const delay = 3000 + Math.random() * 5000; // 3-8 seconds
      setTimeout(() => {
        createTraverser();
        scheduleNextTraverser();
      }, delay);
    }

    // Start spawning after a short delay
    setTimeout(() => {
      createTraverser();
      scheduleNextTraverser();
    }, 2000);
  </script>
</body>
</html>
